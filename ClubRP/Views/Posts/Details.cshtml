@model ClubRP.Models.Post
@{
    ViewBag.Title = "Détails";
}


<div>
    <h2>@Model.Titre</h2>
    <hr />    
    <table class="table">
        @{
            var sortedMessage = from entry in Model.Messages orderby entry.DateMessage ascending select entry;
        }
        @foreach (ClubRP.Models.Message p in sortedMessage)
        {
            <tr>
                <td class="col-lg-3">@Html.DisplayNameFor(model => model.utilisateurName)</td>
                <td colspan="2" class="col-lg-9">@Html.DisplayNameFor(model => model.Messages)</td>
            </tr>
            <tr>
                <td class="col-lg-3">@Html.DisplayFor(model => model.utilisateurName) <br /> Image<br />@(p.DateMessage)</td>
                <td class="col-lg-9">
                    @p.Texte
                </td>
            </tr>
            <tr>
                @if (User.IsInRole("Modérateurs") || User.IsInRole("Administrateurs"))
                {
                   <td>@Html.ActionLink(linkText: "Modifier", actionName: "Edit", controllerName: "Messages", routeValues: new { id = p.MessageID }, htmlAttributes: null) @Html.ActionLink(linkText: "Effacer", actionName: "Delete", controllerName: "Messages", routeValues: new { id = p.MessageID }, htmlAttributes: null)</td>
                }
            </tr>
        }
    </table>
    @Html.Partial("~/Views/Shared/_PartialMessages.cshtml")
</div>
<p>
<p>@Html.ActionLink(linkText: "Répondre", actionName: "Create", controllerName: "Messages", routeValues: new { postId = Model.ID }, htmlAttributes: null)</p>
    @Html.ActionLink(linkText: "Retour au forum", actionName: "Index", controllerName: "Posts")
</p>
